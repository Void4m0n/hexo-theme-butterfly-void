if theme.aside.card_recent_post.enable
  .card-widget.card-recent-post
    .item-headline
      i.fas.fa-history
      span= _p('aside.card_recent_post')
    .aside-list
      - let postLimit = theme.aside.card_recent_post.limit === 0 ? site.posts.length : theme.aside.card_recent_post.limit || 5
      - let sort = theme.aside.card_recent_post.sort === 'updated' ? 'updated' : 'date'
      - site.posts.sort(sort, -1).limit(postLimit).each(function(article){
        - let link = article.link || article.path
        - let title = article.title || _p('no_title')
        - let hasRecentPostCover = article.recent_post_cover !== undefined
        - let cover = hasRecentPostCover ? article.recent_post_cover : article.cover
        - let coverType = hasRecentPostCover ? article.recent_post_cover_type : article.cover_type
        - let coverMime = hasRecentPostCover ? article.recent_post_cover_mime : article.cover_mime
        - let recentPostVideoParameters = article.recent_post_video_parameters || {}
        - let coverVideoParameters = article.cover_video_parameters || {}
        - let autoplay = hasRecentPostCover ? recentPostVideoParameters.autoplay : (recentPostVideoParameters.autoplay ?? coverVideoParameters.autoplay)
        - let loop = hasRecentPostCover ? recentPostVideoParameters.loop : (recentPostVideoParameters.loop ?? coverVideoParameters.loop)
        - let poster = hasRecentPostCover ? recentPostVideoParameters.recent_post_video_poster : (recentPostVideoParameters.recent_post_video_poster ?? coverVideoParameters.cover_video_poster)
        - let noCoverClass = cover === false || !theme.cover.aside_enable ? 'no-cover' : ''
        .aside-list-item(class=noCoverClass)
          if cover && theme.cover.aside_enable
            a.thumbnail(href=url_for(link) title=title)
              if coverType === 'video'
                video(autoplay=autoplay loop=loop muted playsinline poster=poster ? url_for(poster) : undefined)
                  source(src=url_for(cover) type=coverMime || undefined)
              else if coverType === 'img'
                img(src=url_for(cover) onerror=`this.onerror=null;this.src='${url_for(theme.error_img.post_page)}'` alt=title)
              else
                div(style=`background: ${cover}`)
          .content
            a.title(href=url_for(link) title=title)= title
            if theme.aside.card_recent_post.sort === 'updated'
              time(datetime=date_xml(article.updated) title=_p('post.updated') + ' ' + full_date(article.updated)) #[=date(article.updated, config.date_format)]
            else
              time(datetime=date_xml(article.date) title=_p('post.created') + ' ' + full_date(article.date)) #[=date(article.date, config.date_format)]
      - })
